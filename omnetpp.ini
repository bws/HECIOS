# This file is shared by all PFS simulations

[General]
preload-ned-files = src/*/*.ned @INET/nedfiles.lst
sim-time-limit = 1000s

network = adenine

[Cmdenv]
express-mode = yes

[Tkenv]
default-run=1

[Parameters]

###############################################################################
#
# Settings for the adenine network configuration
#
###############################################################################
# Cluster size configuration
adenine.numCPUNodes = 1
adenine.numIONodes = 8


###############################################################################
#
# Settings for the client/end user application
#
#   Note that in the trace filename, "%r" will be replaced with the 
#   application's process rank.
#
###############################################################################
**.mpi.app.traceFile = "../traces/cholesky.proc.%r.trace"
**.mpi.app.numTraceProcs = 8
#data cache type to be used, will enum this for different types
adenine.cpun[*].jobProcess.mpi.cache.dataCacheReplacePolicy = 0

###############################################################################
#
# Adenine INET component configuration
#
###############################################################################
# We should set this to something like a Foundry FESX448
adenine.switch.relayUnitType = "MACRelayUnitPP"
adenine.switch.relayUnit.addressTableFile = ""
adenine.switch.relayUnit.addressTableSize = 100000
adenine.switch.relayUnit.agingTime = 0
adenine.switch.relayUnit.processingTime = 0
adenine.switch.relayUnit.bufferSize = 64000
adenine.switch.relayUnit.highWatermark = 100000
adenine.switch.relayUnit.pauseUnits = 0
adenine.switch.relayUnit.writeScalars = false
adenine.switch.mac[*].address = "auto"
adenine.switch.mac[*].txrate = 136000000000
adenine.switch.mac[*].duplexEnabled = true
adenine.switch.mac[*].writeScalars = false

# We should set this to something like an Intel Pro/1000 PT
#
# RX Ring Length: 256  TX Ring Length: 128
#
adenine.**.eth[*].queueType = "DropTailQueue"
adenine.**.eth[*].queue.frameCapacity = 256
adenine.**.eth[*].mac.promiscuous = false
adenine.**.eth[*].mac.address = "auto"
adenine.**.eth[*].mac.txrate = 1000000000
adenine.**.eth[*].mac.duplexEnabled = true
adenine.**.eth[*].mac.txQueueLimit = 128
adenine.**.eth[*].mac.queueModule = ""
adenine.**.eth[*].mac.writeScalars = false
adenine.**.eth[*].encap.writeScalars = false
adenine.**.ppp[*].queueType = "DropTailQueue"
adenine.**.ppp[*].queue.frameCapacity = 0

# Various INET configuration settings
adenine.**.hca.namid = -1
adenine.**.hca.routingFile = ""
adenine.**.hca.routingFile = ""
adenine.**.hca.IPForward = 0
adenine.**.hca.networkLayer.arp.retryTimeout = 1
adenine.**.hca.networkLayer.arp.retryCount = 3
adenine.**.hca.networkLayer.arp.cacheTimeout = 100
adenine.**.hca.networkLayer.ip.procDelay = 10us
adenine.**.hca.networkLayer.proxyARP = false


###############################################################################
#
# Settings for FSS derived storage layer
#
###############################################################################
**.storage.ioLibraryType = "PFSIOLibrary"               # SPFS Replacement
**.storage.systemCallInterfaceType = "PassThroughSystemCallInterface"
**.storage.fileSystemType = "NativeFileSystem"          # SPFS Replacement
**.storage.blockCacheType = "LRUCache"
**.storage.blockTranslatorType = "NoTranslation"
**.storage.diskSchedulerType = "FIFOScheduler"
**.storage.accessManagerType = "MutexAccessManager"
**.storage.physicalDiskType = "BasicModelDisk"          # SPFS Replacement

# FSS parameters that need to be set to some reasonable values
**.storage.blockCache.cache_file = ""
**.storage.blockCache.number_of_elements = 512      # 256KB Block Cache
**.storage.diskScheduler.scheduler_file = ""
**.storage.diskScheduler.number_of_ops = 100
**.storage.diskScheduler.period = 100

# Performance characteristics of Hitachi Deskstar T7K500 with NCQ (500GB SATA)
# Performance characteristics downloaded from Hitachi:
#  http://www.hitachigst.com/tech/techlib.nsf/products/Deskstar_T7K500
#
**.storage.hardDisk.fixedControllerReadOverheadSecs = 0.0005
**.storage.hardDisk.fixedControllerWriteOverheadSecs = 0.0005
**.storage.hardDisk.trackSwitchTimeSecs = 0.001
**.storage.hardDisk.averageReadSeekSecs = 0.0008
**.storage.hardDisk.averageWriteSeekSecs = 0.0013
**.storage.hardDisk.numCylinders = 16383
**.storage.hardDisk.tracksPerCylinder = 946
**.storage.hardDisk.sectorsPerTrack = 63
**.storage.hardDisk.rpms = 7200

###############################################################################
#
# Settings for BMI TCP applications
#
###############################################################################
**.hca.tcpApp[0].listenPort = 6000
**.hca.tcpApp[0].connectPort = 6000

**.hca.tcpApp[1].connectPort = 6001
**.hca.tcpApp[2].connectPort = 6002

###############################################################################
#
# Settings for all TCP connections
#
###############################################################################
**.tcp.recordStats = 0
**.tcp.mss = 512 # bytes
**.tcp.advertisedWindow= 109568 # =64 MSSs
**.tcp.tcpAlgorithmClass="TCPReno"
**.tcp.sendQueueClass="TCPMsgBasedSendQueue"
**.tcp.receiveQueueClass="TCPMsgBasedRcvQueue"


##############################################################################
#
# UDP Applications (disabled)
#
##############################################################################
**.numUdpApps=0 # 0 means no UDP apps active.
**.udpAppType="UDPBasicApp"


##############################################################################
#
# Ping Application
#
##############################################################################
**.pingApp.destAddr=""  # Empty destAddr ensures the ping app won't start 
**.pingApp.srcAddr=""
**.pingApp.packetSize=56
**.pingApp.interval=1
**.pingApp.hopLimit=32
**.pingApp.count=0
**.pingApp.startTime=1
**.pingApp.stopTime=0
**.pingApp.printPing=false
